# --- SCRIPT AJAIB SETTING OTOMATIS ---
$REPO = "Xnuvers007/osint_stalker"
$PASS = "" # Password ini otomatis diset

Write-Host "1. Sedang membuat Kunci Rahasia (Keystore)..." -ForegroundColor Green
# Membuat file .jks
keytool -genkey -v -keystore release-key.jks -keyalg RSA -keysize 2048 -validity 99999 -alias xnuvers_key -storepass $PASS -keypass $PASS -dname "CN=Xnuvers007, OU=IT, O=OsintStalker, L=Indo, S=ID, C=ID"

Write-Host "2. Sedang upload kunci ke GitHub Secrets..." -ForegroundColor Green
# Mengubah kunci jadi teks dan upload ke GitHub
$base64 = [Convert]::ToBase64String([IO.File]::ReadAllBytes("release-key.jks"))
Write-Output $base64 | gh secret set ANDROID_KEYSTORE_BASE64 --repo $REPO
gh secret set ANDROID_KEY_ALIAS -b "xnuvers_key" --repo $REPO
gh secret set ANDROID_KEY_PASSWORD -b $PASS --repo $REPO
gh secret set ANDROID_STORE_PASSWORD -b $PASS --repo $REPO

# Menulis password ke file lokal laptopmu biar bisa build di laptop juga
$Content = "store.password=$PASS`nkey.password=$PASS`nkey.alias=xnuvers_key`nstore.file=../../release-key.jks"
Set-Content -Path "android/local.properties" -Value $Content -NoNewline

Write-Host "âœ… SELESAI! GitHub & Laptop kamu sudah disetting otomatis!" -ForegroundColor Cyan